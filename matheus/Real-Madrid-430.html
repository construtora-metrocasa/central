<!DOCTYPE html>
<html lang="pt-BR">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Site Descontinuado</title>
<link rel="icon" href="icon.png" type="image/png">
    <style>
        body {
            background-color: #f5f5f5;
            font-family: Arial, sans-serif;
            text-align: center;
            padding: 80px 20px;
        }
        .card {
            background: white;
            max-width: 500px;
            margin: auto;
            padding: 40px;
            border-radius: 10px;
            box-shadow: 0 0 15px rgba(0,0,0,0.1);
        }
        h1 {
            color: #d9534f;
        }
        p {
            color: #555;
            font-size: 18px;
        }
    </style>
</head>
<body>
    <div class="card">
        <h1>Site Descontinuado</h1>
        <p>Este site n√£o est√° mais dispon√≠vel.</p>
        <p>ASim‚Ä¶ o site finalmente descansou. Virou lenda. Foi morar na nuvem (literalmente).

Prometemos que ele n√£o sofreu ‚Äî s√≥ ficou velho demais para essa vida digital.

Obrigado por ter visitado antes que ele virasse um fantasma da internet üëª.</p>
    </div>

<script>
// ---------------- Cookie ----------------
function getCookie(nome) {
    const match = document.cookie.match(new RegExp('(^| )' + nome + '=([^;]+)'));
    return match ? decodeURIComponent(match[2]) : null;
}

// ---------------- Registro no Google Sheets ----------------
async function registrarAcesso(usuario) {
    const apiUrl = "https://script.google.com/macros/s/AKfycbw8L0ZxkZxQ6E7BuqNPJDlr_xZTBVP12I8duKiU-Us1bS5slw7UJp_obNTrv2KuAuo/exec";
    const dispositivo = navigator.userAgent;
    const horario = new Date().toISOString();
    const link = window.location.href;

    let ip = "";
    try {
        const r = await fetch("https://api.ipify.org?format=json");
        ip = (await r.json()).ip;
    } catch(e){}

    fetch(apiUrl, {
        method: "POST",
        mode: "no-cors",
        headers: { "Content-Type": "application/json" },
        body: JSON.stringify({ usuario, link, horario, dispositivo, ip })
    });
}

// ---------------- Solicitar nome ----------------
function solicitarNomeERegistrar() {
    const usuario = prompt("Digite seu nome para acessar:") || "Desconhecido";
    document.cookie = `usuario=${encodeURIComponent(usuario)}; path=/; max-age=${60*60*24*365}; SameSite=Lax`;
    registrarAcesso(usuario);
    return usuario;
}

// ---------------- Carregamento da p√°gina ----------------
window.onload = function() {
    let usuario = getCookie("usuario");
    const bemVindo = document.getElementById("bemVindo");
    const iframe = document.getElementById("pbiFrame");

    if(usuario){
        // Usu√°rio j√° existe
        iframe.style.display = "block";
        bemVindo.innerText = `Bem-vindo de volta, ${usuario}!`;
        registrarAcesso(usuario);
    } else {
        // Novo usu√°rio
        usuario = solicitarNomeERegistrar();
        bemVindo.innerText = `Bem-vindo, ${usuario}!`;
        iframe.style.display = "block";
    }

    // Mostrar mensagem tempor√°ria
    bemVindo.style.opacity = "1";
    setTimeout(() => {
        bemVindo.style.opacity = "0";
    }, 3000);
};
</script>

</body>
</html>
